<!DOCTYPE html>
<html>

    <head>
        <meta charset='utf-8' />
        <title>OED custom progress bar</title>
        <script src="Scripts/jquery-3.0.0.js"></script>
        <script src="Scripts/Local/Helpers.js"></script>
        <script src="Scripts/bootstrap.js"></script>
        <script src="Scripts/BootBox/bootbox.js"></script>
        <script src="Scripts/Local/OedProgressHelper.js"></script>
        <link href="Content/bootstrap.css" rel="stylesheet" />
        <link href="Content/local/oedProgressbar.css" rel="stylesheet" />

        <script src="Scripts/Local/SpokenLanguage.js"></script>

        <style>

            .custom-list {
                list-style: none;
                padding-left: 0;
            }
            .custom-list li {
                position: relative;
                padding-left: 20px;
            }
            .custom-list li:before {
                content: '';
                width: 11px;
                height: 11px;
                position: absolute;
                background-image: url('asserts/bullet.png');
                background-size: cover;
                background-position: center;
                left: 0;
                top: 50%;
                transform: translateY(-50%);
            }    

        </style>
    </head>

    <body>

        <h1 class="sr-only">Progress-bar code sample for bootstrap 4</h1>

        <!-- progress bar -->
        <div class="container-fluid mt-n3 pl-0 pr-0">
            <div class="progress m-3 pl-lg-1" style="height:16px;" id="progressStatus">                
                <div class="progress-bar bg-success" id="pageProgress" role="progressbar">0%</div>
            </div>
        </div>

        <!-- button to step progress bar value -->
        <div class="container form-group mt-lg-1 ml-2">
            <div class="form-row mb-3">
                <div class="col-3">
                    <button class="btn btn-primary btn-block" id="updateButton2">Step 25</button>
                </div>
                <div class="col-9">
                    <!-- <input type="number" class="form-control" id="progressValue2" style="width: 60px; height: 100%;" value="0"> -->
                </div>
                <div class="col"></div>
            </div>
            <div class="form-row mt-lg-3">
                <div class="col-3">
                    <button class="btn btn-primary btn-block" id="resetButton">Reset</button>
                </div>

            </div>
        </div>

        <!-- radio button group -->
        <div class="container-fluid form-group mt-lg-1 pb-2 ml-4 border border-primary w-75"   id="backColor-selection">
            
            <div class="row bg-primary mb-1">
                <div class="col">
                    <label class="text-white mt-sm-1"><strong>Bar Color</strong></label>
                </div>
            </div>
            <div class="form-row" >
                <div class="col">

                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="option_backColor" id="option_backColor-primary" value="bg-primary" >
                        <label class="form-check-label" for="option_backColor-primary">
                            bg-primary
                        </label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="option_backColor" id="option_backColor-danger" value="bg-danger">
                        <label class="form-check-label" for="option_backColor-danger">
                            bg-danger
                        </label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="option_backColor" id="option_backColor-success" value="bg-success" checked>
                        <label class="form-check-label" for="option_backColor-success">
                            bg-success
                        </label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="option_backColor" id="option_backColor-secondary" value="bg-secondary">
                        <label class="form-check-label" for="option_backColor-secondary">
                            bg-secondary
                        </label>
                    </div>

                </div>
            </div>

        </div>

        <div class="container form-group mt-lg-1 pb-2 ml-4 border border-primary w-75"  id="backColor-selection">

            <div class="row">
                
                <div class="col-12">
                    <div class="row bg-primary mb-1">
                        <div class="col-12">
                            <label class="text-white mt-sm-1"><strong>Methods and properties</strong></label>
                        </div>
                    </div>
                    <div class="card border-0 ">
                        
                        <div class="card-body">
                            <p>
                                The following are public scoped
                            </p>
                            <ul id="propertiesMethods" class="custom-list ml-n4">
                                <li>Understands E, EN, S, SP for language codes</li>
                                <li>Language can be set dynamically</li>
                                <li>Methods</li>
                                <li>Increment increment by whole int value</li>
                                <li>StepByQuarters increment bar by 25%</li>
                                <li>StepBy10 increment bar by 10%</li>
                                <li>StepBy5 increment bar by 5%</li>
                                <li>Show calls show()</li>
                                <li>Hide calls hide()</li>
                                <li>setBarcolor for setting bar color</li>
                                <li>setBarcolorOedGreen</li>
                                <li>setBarcolorDanger</li>
                                <li>setBarcolorPrimary</li>
                                <li>setLanguage set spoken lanaguage</li>
                                <li>Properties</li>
                                <li>CurrentValue get current value</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </body>

    <script>

            $(document).ready(function() {  

                var listArray = ['Methods', 'Properties'];

                $('#propertiesMethods li').each(function () {

                    var listItem = $(this);

                    if (jQuery.inArray(listItem.text().split(' ')[0], listArray) === -1) {
                        // not in array
                        listItem.html(listItem.text().replace(/(^\w+)/, '<span class = "text-success">$1</span>'));
                    }else{
                        // in array
                        listItem.html(listItem.text().replace(/(^\w+)/, '<span class = "text-primary font-weight-bold">$1</span>'));
                    }
                    
                });  

                /*
                    Initialize progress-bar with language if ?lang= is passed else default to English
                */
                $OedProgressHelper.init($.urlParam('lang'),"#pageProgress");     

                $('#updateButton2').click(function (event) {
                    
                    $OedProgressHelper.StepByQuarters();

                    //if ($('#progressValue2').val() % 1 === 0) {   }

                }); 
                
                $('#resetButton').click(function (event) {

                    $OedProgressHelper.InitializeValueToZero();

                }); 

                // handle radio button group selection changed
                const select = document.getElementById('backColor-selection');
                select.addEventListener('click', ({ target }) => { // handler fires on root container click
                    if (target.getAttribute('name') === 'option_backColor') { // check if user clicks right element
                        $OedProgressHelper.setBarcolor(target.value);
                    }
                });
                
                
                console.log($.urlParam('lang'));  

            });

    </script>
</html>